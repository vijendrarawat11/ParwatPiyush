@{
    ViewData["Title"] = "Home Page";
}
@{
    var latestNews = ViewBag.LatestNews as List<News>;
    var newsByTopic = ViewBag.NewsByTopic as Dictionary<string, List<News>>;
    var stateNews = newsByTopic.ContainsKey("State") ? newsByTopic["State"].Take(2).ToList() : new List<News>();
    var politicsNews = newsByTopic.ContainsKey("Politics") ? newsByTopic["Politics"].Take(2).ToList() : new List<News>();
    var countryNews = newsByTopic.ContainsKey("देश-विदेश") ? newsByTopic["देश-विदेश"].OrderByDescending(n => n.PublishedDate).Take(4).ToList() : new List<News>();
    var religionNews = newsByTopic.ContainsKey("धर्म") ? newsByTopic["धर्म"].OrderByDescending(n => n.PublishedDate).FirstOrDefault() : null;
    var fashionNews = newsByTopic.ContainsKey("फैशन") ? newsByTopic["फैशन"].OrderByDescending(n => n.PublishedDate).Take(4).ToList() : new List<News>();
    var sportsNews = newsByTopic.ContainsKey("खेल") ? newsByTopic["खेल"].OrderByDescending(n => n.PublishedDate).FirstOrDefault() : null;
    var crimeNews = newsByTopic.ContainsKey("अपराध") ? newsByTopic["अपराध"].OrderByDescending(n => n.PublishedDate).Take(4).ToList() : new List<News>();
    var heritageNews = newsByTopic.ContainsKey("विरासत") ? newsByTopic["विरासत"].OrderByDescending(n => n.PublishedDate).Take(1).ToList(): new List<News>();
    var jobNews = newsByTopic.ContainsKey("नौकरशाही") ? newsByTopic["नौकरशाही"].OrderByDescending(n => n.PublishedDate).Take(4).ToList() : new List<News>();
}
<div class="container-fluid px-0">
    <div class="row align-items-center bg-danger text-white py-2" style="margin-top: 0;">
        <div class="col-lg-2 col-md-3 col-sm-4 fw-bold ps-3">
            ब्रेकिंग न्यूज:
        </div>
        <div class="col-lg-10 col-md-9 col-sm-8">
            <marquee behavior="scroll" direction="left" scrollamount="6">
                @foreach (var news in ViewBag.BreakingNews)
                {
                    <span class="me-4">
                        <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="text-white text-decoration-none">
                            @news.Title
                        </a>
                    </span>
                }
            </marquee>
        </div>
    </div>
</div>
<!-- First Row: Slider + Small News Cards -->
<div class="row">
    <!-- News Slider (col-lg-8) -->
    <div class="col-lg-8">
        <div id="newsSlider" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
            <div class="carousel-inner">
                @foreach (var news in latestNews)
                {
                    <div class="carousel-item @(news == latestNews.First() ? "active" : "")">
                        <div class="position-relative">
                            <img src="@news.ImagePath" class="d-block w-100 fixed-height" alt="News Image">

                            <!-- Topic (Top-Left) -->
                            <h5 class="position-absolute top-0 start-0 p-2 text-white topic-bg">
                                <a href="@Url.Action("Topic", "Home", new { name = news.Topic.Name })" class="text-white topic-link">@news.Topic.Name</a>
                            </h5>

                            <!-- News Content (Bottom-Left) -->
                                <div class="position-absolute bottom-0 start-0 p-2 text-white bg-dark bg-opacity-75 w-100 content-overlay">
                                <p class="mb-1">@news.PublishedDate.ToShortDateString()</p>
                                <h6 class="fw-bold">
                                    <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="text-white news-link">@news.Title</a>
                                </h6>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <!-- Carousel Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#newsSlider" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#newsSlider" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
        </div>
    </div>

    <!-- Small News Cards (col-lg-4) -->
    <div class="col-lg-4">
        <div class="row">
            @foreach (var news in latestNews.Where(n => n.Topic.Name == "उत्तराखण्ड").Take(1))
            {
                <div class="col-6 mb-3">
                    <div class="position-relative card-overlay">
                        <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">

                        <!-- Topic (Top-Left) -->
                        <h6 class="position-absolute top-0 start-0 p-1 topic-bg">
                            <a href="@Url.Action("Topic", "Home", new { name = news.Topic.Name })" class="text-white topic-link">@news.Topic.Name</a>
                        </h6>

                        <!-- News Content (Bottom-Left) -->
                        <div class="position-absolute bottom-0 start-0 p-2 text-white bg-dark bg-opacity-75 w-100">
                            <p class="mb-1">@news.PublishedDate.ToShortDateString()</p>
                            <h6 class="fw-bold">
                                <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="text-white news-link">@news.Title</a>
                            </h6>
                        </div>
                    </div>
                </div>
            }

            @foreach (var news in latestNews.Where(n => n.Topic.Name == "देश-विदेश").Take(1))
            {
                <div class="col-6 mb-3">
                    <div class="position-relative card-overlay">
                        <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">

                        <!-- Topic (Top-Left) -->
                        <h6 class="position-absolute top-0 start-0 p-1 topic-bg">
                            <a href="@Url.Action("Topic", "Home", new { name = news.Topic.Name })" class="text-white topic-link">@news.Topic.Name</a>
                        </h6>

                        <!-- News Content (Bottom-Left) -->
                        <div class="position-absolute bottom-0 start-0 p-2 text-white bg-dark bg-opacity-75 w-100">
                            <p class="mb-1">@news.PublishedDate.ToShortDateString()</p>
                            <h6 class="fw-bold">
                                <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="text-white news-link">@news.Title</a>
                            </h6>
                        </div>
                    </div>
                </div>
            }
            @foreach (var news in latestNews.Where(n => n.Topic.Name != "उत्तराखण्ड").Take(2))
            {
                <div class="col-lg-6 col-12 mb-3">
                    <div class="position-relative card-overlay">
                        <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">

                        <!-- Topic (Top-Left) -->
                        <h6 class="position-absolute top-0 start-0 p-1 topic-bg">
                            <a href="@Url.Action("Topic", "Home", new { name = news.Topic.Name })" class="text-white topic-link">@news.Topic.Name</a>
                        </h6>

                        <!-- News Content (Bottom-Left) -->
                        <div class="position-absolute bottom-0 start-0 p-2 text-white bg-dark bg-opacity-75 w-100">
                            <p class="mb-1">@news.PublishedDate.ToShortDateString()</p>
                            <h6 class="fw-bold">
                                <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="text-white news-link">@news.Title</a>
                            </h6>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>


<!-- News By Topic -->
 @foreach (var topic in newsByTopic.Keys) 
 { 
         <h2><a href="@Url.Action("Topic", "Home", new { name = topic })" class="topic-link">@topic</a></h2>  
    <div class="row"> 
        @foreach (var news in newsByTopic[topic]) 
         { 
             <div class="col-md-3"> 
                 <div class="card"> 
                             <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image"> 
                     <div class="card-body"> 
                                  <p class="card-text">@news.PublishedDate.ToShortDateString()</p> 
                                 <h5 class="card-title">  <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a></h5>                  
                                 @* <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="btn btn-primary">Read More</a> *@ 
                     </div> 
                 </div> 
             </div> 
         } 
     </div> 
 } 







@*
@if (countryNews.Any())
{   <div class="d-flex align-items-center">
    <!-- Red Vertical Line -->
    <div class="vertical-line"></div>
        <h2><a href="@Url.Action("Topic", "Home", new { name = "देश-विदेश" })" class="topic-link">देश-विदेश</a></h2>
    </div>
    <div class="row">
        @foreach (var news in countryNews)
        {
            <div class="col-md-3">
                <div class="card">
                    <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">
                    <div class="card-body">
                        <p class="card-text">@news.PublishedDate.ToShortDateString()</p>
                        <h5 class="card-title">
                            <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                        </h5>
                    </div>
                </div>
            </div>
        }
    </div>
}


@if (religionNews != null)
{   <div class="d-flex align-items-center">
    <div class="vertical-line"></div>
        <h2><a href="@Url.Action("Topic", "Home", new { name = "धर्म" })" class="topic-link">धर्म</a></h2>
    </div>    
<div class="row">
        <div class="col-lg-6">
            <div class="card d-flex flex-row align-items-center">
                <!-- Image on the left -->
                <img src="@religionNews.ImagePath" class="card-img-left fixed-height" alt="News Image" style="width: 50%; object-fit: cover;">

                <!-- Text on the right -->
                <div class="card-body">
                    <p class="card-text">@religionNews.PublishedDate.ToShortDateString()</p>
                    <h5 class="card-title">
                        <a href="@Url.Action("Details", "Home", new { id = religionNews.Id })" class="news-link">@religionNews.Title</a>
                    </h5>
                </div>
            </div>
        </div>

        <!-- Empty Space on Right -->
        <div class="col-lg-6"></div>
    </div>
}

@if (fashionNews.Any())
{  
    <div class="row mt-2">
        @for (int i = 0; i < fashionNews.Count; i += 2)
        {
            <div class="row mb-2">
                @for (int j = 0; j < 2 && i + j < fashionNews.Count; j++)
                {
                    var news = fashionNews[i + j];

                    <div class="col-lg-3">
                        <div class="card d-flex flex-row align-items-center">
                            <!-- Image on the left (Smaller) -->
                            <img src="@news.ImagePath" class="card-img-left-1" alt="News Image">

                            <!-- Text on the right (Bigger) -->
                            <div class="card-body">
                                <span class="text-white topic-bg"><a href="@Url.Action("Topic", "Home", new { name = "फैशन" })" class="topic-link-1">@news.Topic.Name</a></span>
                                <p class="card-text">@news.PublishedDate.ToShortDateString()</p>
                                <h5 class="card-title">
                                    <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                                </h5>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
}

@if (sportsNews != null)
{   <div class="d-flex align-items-center">
    <div class="vertical-line"></div>
        <h2><a href="@Url.Action("Topic", "Home", new { name = "खेल" })" class="topic-link">खेल</a></h2>
    </div>
        <div class="row">
        <div class="col-lg-6">
            <div class="card d-flex flex-row align-items-center">
                <!-- Image on the left -->
                <img src="@sportsNews.ImagePath" class="card-img-left fixed-height" alt="News Image" style="width: 50%; object-fit: cover;">

                <!-- Text on the right -->
                <div class="card-body">
                    <p class="card-text">@sportsNews.PublishedDate.ToShortDateString()</p>
                    <h5 class="card-title">
                        <a href="@Url.Action("Details", "Home", new { id = sportsNews.Id })" class="news-link">@sportsNews.Title</a>
                    </h5>
                </div>
            </div>
        </div>

        <!-- Empty Space on Right -->
        <div class="col-lg-6"></div>
    </div>
}

@if (crimeNews.Any())
{   <div class="d-flex align-items-center">
    <div class="vertical-line"></div>
        <h2><a href="@Url.Action("Topic", "Home", new { name = "अपराध" })" class="topic-link">अपराध</a></h2>
        </div>
    <div class="row">
        @for (int i = 0; i < crimeNews.Count; i += 2)
        {
            <div class="row mb-3">
                @for (int j = 0; j < 2 && i + j < crimeNews.Count; j++)
                {
                    var news = crimeNews[i + j];

                    <div class="col-lg-6">
                        <div class="card d-flex flex-row align-items-center">
                            <!-- Image on the left (Smaller) -->
                            <img src="@news.ImagePath" class="card-img-left-1" alt="News Image">

                            <!-- Text on the right (Bigger) -->
                            <div class="card-body">
                                <p class="card-text">@news.PublishedDate.ToShortDateString()</p>
                                <h5 class="card-title">
                                    <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                                </h5>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
}
<div class="d-flex align-items-center">
    <div class="vertical-line"></div>
    <h2 class="topic-heading"><a href="@Url.Action("Topic", "Home", new { name = "विरासत" })" class="topic-link">विरासत</a></h2>
</div>

<!-- Row for Heritage and Job News -->
<div class="row">
    <!-- Left Column (Heritage News - One Article) -->
    <div class="col-md-4">
        @if (heritageNews.Any())
        {
            var news = heritageNews.First();
            <div class="card">
                <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">
                <div class="card-body">
                    <p class="text-muted">@news.PublishedDate.ToShortDateString()</p>
                    <h5 class="card-title">
                        <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                    </h5>
                </div>
            </div>
        }
    </div>

    <!-- Right Column (Job News - Four Articles) -->
    <div class="col-md-4">
        @foreach (var news in jobNews)
        {
            <div class="card d-flex flex-row align-items-center mb-1">
                <!-- Image on the left -->
                @* <img src="@news.ImagePath" class="card-img-left fixed-height" alt="News Image"> *@
 @*               <img src="@news.ImagePath" class="card-img-left-1" alt="News Image">

                <!-- Text on the right -->
                <div class="card-body">
                    @* <div class="d-flex align-items-center"> *@

 @*                   <span class="text-white topic-bg"><a href="@Url.Action("Topic", "Home", new { name = "नौकरशाही" })" class="topic-link-1">@news.Topic.Name</a></span>
                   @* </div> *@
 @*                   <p class="text-muted">@news.PublishedDate.ToShortDateString()</p>
                    <h6 class="card-title">
                        <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                    </h6>
                </div>
            </div>
        }
    </div>
</div>

@if (countryNews.Any())
{  <div class="d-flex align-items-center">
    <div class="vertical-line"></div>
        <h2><a href="@Url.Action("Topic", "Home", new { name = "उत्तराखण्ड" })" class="topic-link">उत्तराखण्ड</a></h2>
    </div>
    <div class="row">
        @foreach (var news in countryNews)
        {
            <div class="col-md-3">
                <div class="card">
                    <img src="@news.ImagePath" class="card-img-top fixed-height" alt="News Image">
                    <div class="card-body">
                        <p class="card-text">@news.PublishedDate.ToShortDateString()</p>
                        <h5 class="card-title">
                            <a href="@Url.Action("Details", "Home", new { id = news.Id })" class="news-link">@news.Title</a>
                        </h5>
                    </div>
                </div>
            </div>
        }
    </div>
}
*@